<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
  <link rel="stylesheet" href="../css/login.css" />
  <title>Login</title>
</head>

<body>
  <header>
    <a href="../../../../../index.html" class="back">
      <img src="../img/logo.png" alt="Super Management" class="logo">
    </a>
  </header>


  <main>
    <form class="formulario" id="login">
      <div class="form-group">
        <label for="InputEmail1">Email</label>
        <input type="email" class="form-control" id="email" aria-describedby="emailHelp">
        <small id="emailHelp" class="form-text text-muted">Suas informações estão seguras
          conosco</small>
      </div>
      <div class="form-group">
        <label for="InputPassword1">Senha</label>
        <input type="password" class="form-control" id="senha">
      </div>
      <div class="form-group form-check">
        <input type="checkbox" class="form-check-input" id="remember">
        <label class="form-check-label" for="Check1">Lembrar de mim</label>
      </div>
      <button type="submit" class="btn btn-success">Enviar</button>
    </form>

    <div class="cad">
      Ainda não possui uma conta?
      <p>
        <a href="cadastro.html">Faça o cadastro agora!</a>
      </p>
    </div>
    
  </main>


  <script>
     //Executa funcao de login
     login.onsubmit = (e) => {
      e.preventDefault();
      var email = document.getElementById("email").value;
      var senha = document.getElementById("senha").value;

      var params = "email="+email+"&senha="+senha;
      var xhttp = new XMLHttpRequest();
      
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          window.location.href = "home.html";
         }
         else
         {
          let error = `<p id="emailHelp" class="form-text text-danger">Crendenciais Inválidas.</p>`;
          document.getElementById('emailHelp').outerHTML = error;
         }
        
      }
      xhttp.open("POST", "/usuarios/search", true);
      xhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhttp.send(params);
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
  </script>
</body>

</html>